{% extends "base.html" %}

{% block title %}Student Dashboard{% endblock %}

{% block head_extra %}
<script>
  window.STUDENT_ID = {{ (current_user.student_id if current_user.is_authenticated else None) | tojson }};
  window.STUDENT_NAME = {{ (current_user.name if current_user.is_authenticated else "") | tojson }};
</script>
{% endblock %}

{% block body %}
<div class="bg-gradient"></div>

<header class="topbar">
  <a href="{{ url_for('web.index') }}" class="logo">‚Üê</a>
  <h1 class="brand">Student Dashboard</h1>
  <div class="spacer"></div>

  <!-- verification + geolocation controls -->
  <div class="compact" style="display:flex; gap:8px; align-items:center; margin-right:12px; flex-wrap:wrap;">
    <button id="btnFace" class="btn">Facial Verification</button>
    <button id="btnSpeech" class="btn">Speech Verification</button>
    <button id="btnLocation" class="btn">Use my location</button>
    <span id="verifyBadge" class="badge">0/3 verified</span>
    <span id="locBadge" class="badge">üìç location off</span>
  </div>

  <label class="compact">Your Name
    <input id="studentName" placeholder="e.g. Abhibhav" value="{{ current_user.name }}" />
  </label>
</header>

<main class="container-wide" style="padding-top:80px">
  <section class="panel">
    <h2>Active Now</h2>
    <div id="activeList" class="grid"></div>
  </section>

  <section class="panel">
    <h2>Upcoming</h2>
    <div id="upcomingList" class="grid"></div>
  </section>

  <section class="panel">
    <h2>Your Attendance</h2>
    <div id="myAttendance" class="grid"></div>
  </section>

  <!-- Phrase shown inline -->
  <section class="panel">
    <h2>Speech Verification Challenge</h2>
    <p id="speechPhrase" style="font-weight:bold; color:#444;"></p>
  </section>
</main>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/student.js') }}"></script>
{% endblock %}
